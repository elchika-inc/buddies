# lefthook.yml
# Git フックの自動化設定

# pre-commit フック
pre-commit:
  parallel: true
  commands:
    sync-shared:
      run: ./scripts/sync-shared.sh
      tags: sync
      glob: "packages/shared/src/**/*"
      
    lint:
      run: npm run lint
      tags: lint
      
    type-check:
      run: npm run type-check
      tags: typecheck

# pre-push フック
pre-push:
  parallel: false
  commands:
    sync-shared:
      run: ./scripts/sync-shared.sh
      tags: sync
      
    build:
      run: npm run build
      tags: build
      skip:
        - merge
        - rebase

# commit-msg フック（一時的に無効化）
# commit-msg:
#   commands:
#     check-message:
#       run: |
#         if ! head -1 "$1" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf|build|ci|revert)(\(.+?\))?: .{1,100}"; then
#           echo "❌ コミットメッセージが規約に従っていません"
#           echo "📝 フォーマット: <type>(<scope>): <subject>"
#           exit 1
#         fi

# 設定
skip_output:
  - meta
  - summary